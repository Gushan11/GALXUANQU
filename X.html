<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆä¿¡æ¯å·¥å…·åˆé›†</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            color: #333;
        }

        /* æ ‡ç­¾é€‰æ‹©å™¨æ ·å¼ */
        .category {
            margin-bottom: 15px;
        }
        .category-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .button {
            padding: 8px 12px;
            background-color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .button.selected {
            background-color: #4caf50;
            color: white;
        }
        .selected-tags {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
            white-space: pre-wrap;
            min-height: 100px;
        }

        /* æ—¶é—´é€‰æ‹©å™¨æ ·å¼ */
        .calendar {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        select {
            margin-right: 10px;
            padding: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 8px;
            text-align: center;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        .input-box {
            margin-top: 10px;
            padding: 8px;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            min-height: 40px;
            resize: none;
        }

        /* æ¸¸æˆåç§°è½¬æ¢å™¨æ ·å¼ */
        .game-name-converter {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .converter-row {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        /* æŒ‰é’®é€šç”¨æ ·å¼ */
        .action-btn {
            padding: 10px 15px;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: opacity 0.2s;
        }
        .action-btn:hover {
            opacity: 0.9;
        }
        .copy-btn {
            background-color: #2196F3;
            margin-top: 15px;
        }
        .convert-btn {
            background-color: #4CAF50;
        }

        /* Emojiæ ·å¼ */
        .emoji {
            font-size: 1.2em;
            margin-right: 5px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <h1>ğŸ® æ¸¸æˆä¿¡æ¯ç”Ÿæˆå·¥å…·</h1>

    <!-- æ¸¸æˆåç§°è¾“å…¥ -->
    <div class="game-name-converter">
        <h3>ğŸ•¹ï¸ æ¸¸æˆåç§°</h3>
        <textarea id="gameName" class="input-box" placeholder="è¾“å…¥æ¸¸æˆåç§°..."></textarea>
        <div class="converter-row">
            <button class="action-btn convert-btn" onclick="updateAllContent()">âœ¨ ç”Ÿæˆæ ‡ç­¾æ ¼å¼</button>
        </div>
    </div>

    <!-- æ ‡ç­¾é€‰æ‹©å™¨ -->
    <div id="tagContainer"></div>

    <!-- æ—¶é—´é€‰æ‹©å™¨ -->
    <div class="calendar">
        <label>ğŸ“… é€‰æ‹©æ—¥æœŸï¼š</label>
        <select id="yearSelect"></select>
        <select id="monthSelect"></select>
        <table id="calendarTable">
            <tr><th>æ—¥</th><th>ä¸€</th><th>äºŒ</th><th>ä¸‰</th><th>å››</th><th>äº”</th><th>å…­</th></tr>
        </table>
    </div>

    <!-- è‡ªå®šä¹‰è¾“å…¥ -->
    <textarea id="extraText1" class="input-box" placeholder="ğŸ·ï¸ è‡ªå®šä¹‰æ ‡ç­¾..."></textarea>
    <textarea id="extraText2" class="input-box" placeholder="ğŸ“œ è¡¥å……è¯´æ˜/æ¸¸æˆä»‹ç»..."></textarea>

    <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
    <div class="selected-tags">
        <strong>ğŸ“‹ ç”Ÿæˆç»“æœï¼š</strong>
        <div id="selectedText"></div>
    </div>

    <button class="action-btn copy-btn" onclick="copyText()">ğŸ“‹ å¤åˆ¶å…¨éƒ¨å†…å®¹</button>

    <script>
        // å…¨å±€å˜é‡
        let selectedCategories = {};
        let selectedDateText = "";
        let convertedGameName = "";

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener("DOMContentLoaded", function() {
            // æ ‡ç­¾é…ç½®
            const config = [
                { "title": "ğŸ–¥ï¸ è¿è¡Œå¹³å°", "options": ["WINDOWS", "å®‰å“", "JOIPLAY", "WINE", "KRKR", "TY", "WINLATOR", "EXAGEAR", "MAC"] },
                { "title": "ğŸ—£ï¸ è¯­è¨€", "options": ["æ—¥æ–‡", "ç®€ä¸­", "ç¹ä¸­", "ç²¾ç¿»", "AIç¿»è¯‘"] },
                { "title": "ğŸ“– å‰§æƒ…", "options": ["æ— å‰§æƒ…", "å°‘å‰§æƒ…", "é•¿å‰§æƒ…"] },
                { "title": "ğŸŒŸ æ¸¸æˆç±»å‹", "options": ["SLG", "RPG", "GALGAME", "ACT","ADV","ARPG", "ä¼‘é—²", "ç¥ä½œ", "æ–°ä½œ", "AVG", "è€ç‰©", "æ‹”ä½œ", "è§†è§‰å°è¯´", "3D", "å¼‚ä¸–ç•Œ"] },
                { "title": "â¤ï¸è‰²æƒ…å†…å®¹", "options": ["å·¨ä¹³", "è´«ä¹³", "èè‰", "äººå¦»", "è§¦æ‰‹", "å¼‚ç§æ—", "å¼‚ä¸–ç•Œ", "å‚¬çœ ", "æŸç¼š", "å‡Œè¾±", "è™«å¥¸", "ç™¾åˆ", "ç”µè½¦", "è§¦æ‘¸", "æœºæ¢°", "ç¡å¥¸", "é‡æˆ˜", "éœ²å‡º", "æ‰¶å¥¹", "NTR", "åå®«", "é€†NTR", "é€†åå®«", "çº¯çˆ±", "SM", "3P", "æ€§æœåŠ¡", "æ‹æ‘„", "ç¾¤äº¤", "çŒå¥‡", "ç ´å¤„", "è¶…ä¹³", "æ€§ç©å…·", "é›Œå°é¬¼", "å…½è€³å¨˜", "è¡€è…¥"] },
            ];

            // ç”Ÿæˆæ ‡ç­¾æŒ‰é’®
            const container = document.getElementById("tagContainer");
            config.forEach(category => {
                const categoryDiv = document.createElement("div");
                categoryDiv.className = "category";
                categoryDiv.innerHTML = `
                    <div class="category-title">${category.title}</div>
                    <div class="buttons">
                        ${category.options.map(opt => 
                            `<button class="button">${opt}</button>`
                        ).join("")}
                    </div>
                `;
                container.appendChild(categoryDiv);
            });

            // æ ‡ç­¾ç‚¹å‡»é€»è¾‘
            document.querySelectorAll(".button").forEach(button => {
                button.addEventListener("click", function() {
                    this.classList.toggle("selected");
                    updateSelectedCategories();
                    updateAllContent();
                });
            });

            // æ—¥å†ç”Ÿæˆé€»è¾‘
            const yearSelect = document.getElementById("yearSelect");
            const monthSelect = document.getElementById("monthSelect");
            const calendarTable = document.getElementById("calendarTable");

            // å¹´ä»½é€‰é¡¹ï¼ˆ1950-2050ï¼‰
            for (let y = 1950; y <= 2050; y++) {
                yearSelect.innerHTML += `<option value="${y}">${y}å¹´</option>`;
            }
            yearSelect.value = new Date().getFullYear();

            // æœˆä»½é€‰é¡¹
            for (let m = 1; m <= 12; m++) {
                monthSelect.innerHTML += `<option value="${m}">${m}æœˆ</option>`;
            }
            monthSelect.value = new Date().getMonth() + 1;

            // ç”Ÿæˆæ—¥å†
            function generateCalendar() {
                const year = +yearSelect.value;
                const month = +monthSelect.value - 1;
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                
                calendarTable.innerHTML = `<tr><th>æ—¥</th><th>ä¸€</th><th>äºŒ</th><th>ä¸‰</th><th>å››</th><th>äº”</th><th>å…­</th></tr>`;
                
                let row = calendarTable.insertRow();
                for (let i = 0; i < firstDay.getDay(); i++) row.insertCell();

                for (let d = 1; d <= lastDay.getDate(); d++) {
                    if (row.cells.length === 7) row = calendarTable.insertRow();
                    const cell = row.insertCell();
                    cell.textContent = d;
                    cell.onclick = () => {
                        selectedDateText = `å‘å”®æ—¶é—´ï¼š#${year}å¹´ #${month + 1}æœˆ ${d}`;
                        updateAllContent();
                    };
                }
            }

            yearSelect.addEventListener("change", generateCalendar);
            monthSelect.addEventListener("change", generateCalendar);
            generateCalendar();

            // ä¸ºé¢å¤–è¾“å…¥æ¡†æ·»åŠ è¾“å…¥ç›‘å¬
            document.getElementById("extraText1").addEventListener("input", updateAllContent);
            document.getElementById("extraText2").addEventListener("input", updateAllContent);
            document.getElementById("gameName").addEventListener("input", updateAllContent);
        });

        // æ›´æ–°å·²é€‰æ ‡ç­¾
        function updateSelectedCategories() {
            selectedCategories = {};
            document.querySelectorAll(".button.selected").forEach(btn => {
                const category = btn.closest(".category").querySelector(".category-title").textContent;
                (selectedCategories[category] || (selectedCategories[category] = [])).push("#" + btn.textContent);
            });
        }

        // è½¬æ¢æ¸¸æˆåç§°
        function convertGameName() {
            const input = document.getElementById("gameName").value.trim();
            convertedGameName = input
                .replace(/[^\p{L}\p{N}]/gu, "_")
                .replace(/_+/g, "_")
                .replace(/^_|_$/g, "");
            
            return convertedGameName ? `#${convertedGameName}` : "";
        }

        // æ›´æ–°æ‰€æœ‰å†…å®¹æ˜¾ç¤º
        function updateAllContent() {
            const gameName = convertGameName();
            let content = "";

            // æ·»åŠ æ¸¸æˆåç§°ï¼ˆğŸ®æ¸¸æˆæ‰‹æŸ„emojiï¼‰
            if (gameName) {
                content += `ğŸ® ${gameName}\n\n`;
            }

            // æ·»åŠ åˆ†ç±»æ ‡ç­¾ï¼ˆå›¾é’‰emojiï¼‰
            const categoryContent = Object.entries(selectedCategories)
                .map(([k, v]) => `${k}: ${v.join(" ")}`)
                .join("\n");
            
            if (categoryContent) {
                content += categoryContent + "\n";
            }

            // æ·»åŠ æ—¥æœŸï¼ˆğŸ“…æ—¥å†emojiï¼‰
            if (selectedDateText) {
                content += `ğŸ“… ${selectedDateText}\n`;
            }

            // æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾ï¼ˆğŸ·ï¸æ ‡ç­¾emojiï¼‰
            const extra1 = document.getElementById("extraText1").value.trim();
            if (extra1) {
                content += `\nğŸ·ï¸ ${extra1}`;
            }

            // æ·»åŠ åˆ†éš”çº¿å’Œè¡¥å……å†…å®¹ï¼ˆğŸ“œå·è½´emojiï¼‰
            const extra2 = document.getElementById("extraText2").value.trim();
            if (extra2) {
                content += `\n\nğŸ“œ â€”â€”â€”â€”â€”æ¸¸æˆä»‹ç»â€”â€”â€”â€”â€”â€”\n\nâœ¨ ${extra2}`;
            }

            document.getElementById("selectedText").textContent = content;
        }

        // å¤åˆ¶åŠŸèƒ½
        function copyText() {
            const content = document.getElementById("selectedText").textContent;
            if (content.trim()) {
                navigator.clipboard.writeText(content);
                alert("ğŸ“‹ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
            } else {
                alert("âš ï¸ æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹ï¼");
            }
        }
    </script>
</body>
</html>
